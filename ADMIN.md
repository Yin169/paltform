# 管理员权限获取指南

本文档说明了如何在电商平台上获取管理员权限。

## 方法一：使用命令行工具（推荐）

### 步骤 1: 注册普通用户账户
首先，您需要在平台上注册一个普通用户账户：
1. 访问注册页面 (`/register`)
2. 填写用户名、邮箱和密码
3. 完成注册流程

### 步骤 2: 设置管理员权限
使用命令行工具将普通用户设置为管理员：

```bash
npm run make:admin <用户名>
```

例如，如果您的用户名是 "adminuser"，则运行：
```bash
npm run make:admin adminuser
```

### 步骤 3: 登录并访问管理后台
1. 使用管理员账户登录系统
2. 访问管理后台页面 (`/admin`)
3. 开始管理订单和商品

## 方法二：直接数据库操作

如果您有数据库访问权限，可以直接修改用户记录：

```javascript
// 连接到MongoDB数据库
// 找到目标用户并更新其role字段为"admin"
db.users.updateOne(
  { username: "目标用户名" },
  { $set: { role: "admin" } }
)
```

## 验证管理员权限

设置完成后，您可以通过以下方式验证管理员权限：

1. 登录账户
2. 访问 `/admin` 页面，应能正常访问管理后台
3. 在管理后台可以查看所有订单和商品
4. 可以编辑或删除任何用户的商品
5. 可以更新任何订单的状态

## 安全注意事项

1. **限制管理员数量**：只给可信任的用户分配管理员权限
2. **定期审查**：定期检查管理员账户列表
3. **强密码策略**：确保管理员账户使用强密码
4. **操作日志**：重要的管理操作应该记录日志（此功能需要额外开发）

## 常见问题

### Q: 运行命令时出现 "用户未找到" 错误
A: 请确保用户名拼写正确，用户名是注册时填写的用户名，不是邮箱。

### Q: 运行命令时出现数据库连接错误
A: 请确保MongoDB服务正在运行，并且 `.env` 文件中的 `MONGODB_URI` 配置正确。

### Q: 设置管理员后无法访问管理页面
A: 请确保：
1. 成功运行了设置命令且无错误
2. 使用的是设置为管理员的账户登录
3. 用户的 role 字段确实已更新为 "admin"